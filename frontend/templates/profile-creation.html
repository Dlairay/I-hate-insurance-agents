<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Creation - Clearcover</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Fredoka', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-image: url('/static/images/background_img.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            background: transparent;
            padding: 1.5rem 3rem;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo-container img {
            height: 120px;
            width: 120px;
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }
        
        /* Progress Steps */
        .progress-container {
            background: white;
            padding: 2rem 3rem;
            border-bottom: 1px solid #eee;
        }
        
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }
        
        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 30px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: #ddd;
            z-index: -1;
        }
        
        .step.active::after,
        .step.completed::after {
            background: #5ECDB9;
        }
        
        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            border: 3px solid #ddd;
        }
        
        .step.active .step-icon {
            background: #5ECDB9;
            border-color: #5ECDB9;
        }
        
        .step.completed .step-icon {
            background: #5ECDB9;
            border-color: #5ECDB9;
        }
        
        .step-icon img {
            width: 30px;
            height: 30px;
        }
        
        .step-label {
            font-size: 0.85rem;
            color: #999;
            text-align: center;
        }
        
        .step.active .step-label {
            color: #333;
            font-weight: 600;
        }
        
        .step.completed .step-label {
            color: #5ECDB9;
        }
        
        .step-number {
            background: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #999;
        }
        
        .step.active .step-number {
            color: white;
        }
        
        .step.completed .step-number {
            color: white;
        }
        
        /* Main Content */
        .main-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 3rem;
        }
        
        .content-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        
        .content-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .content-subtitle {
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        /* Singpass Button */
        .singpass-btn {
            display: inline-block;
            margin: 2rem 0;
        }
        
        .singpass-btn img {
            width: 300px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .singpass-btn img:hover {
            transform: scale(1.05);
        }
        
        /* Skip Link */
        .skip-link {
            color: #666;
            text-decoration: none;
            font-size: 0.95rem;
            margin-top: 1rem;
            display: inline-block;
        }
        
        .skip-link:hover {
            text-decoration: underline;
        }
        
        /* Info Box */
        .info-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
            text-align: left;
        }
        
        .info-box-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .info-box-content {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        /* Manual Upload Section */
        .manual-upload {
            display: none;
            margin-top: 2rem;
        }
        
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: #5ECDB9;
            background: #f8fffe;
        }
        
        .upload-area.dragover {
            border-color: #5ECDB9;
            background: #f0fffc;
        }
        
        .upload-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
        }
        
        .upload-text {
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .upload-hint {
            color: #999;
            font-size: 0.85rem;
        }
        
        .file-input {
            display: none;
        }
        
        .continue-btn {
            background: #5ECDB9;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.3s;
        }
        
        .continue-btn:hover {
            background: #4DB8A3;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 1rem 1.5rem;
            }
            
            .progress-container {
                padding: 1.5rem;
            }
            
            .step-label {
                font-size: 0.75rem;
            }
            
            .main-container {
                padding: 1.5rem;
            }
            
            .content-card {
                padding: 2rem;
            }
            
            .singpass-btn img {
                width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo-container" onclick="handleLogoClick()" style="cursor: pointer;">
            <img src="/static/images/logo.png" alt="Clearcover">
            <span class="logo-text">Clearcover</span>
        </div>
    </div>
    
    <!-- Progress Steps -->
    <div class="progress-container">
        <div class="progress-steps">
            <div class="step active">
                <div class="step-icon">
                    <img src="/static/images/upload_docs_icon.png" alt="Upload Documents">
                </div>
                <div class="step-label">
                    STEP 1<br>
                    Upload Documents
                </div>
            </div>
            
            <div class="step">
                <div class="step-icon">
                    <img src="/static/images/consultation 1.png" alt="Consultation">
                </div>
                <div class="step-label">
                    STEP 2<br>
                    Consultation
                </div>
            </div>
            
            <div class="step">
                <div class="step-icon">
                    <img src="/static/images/tick 3.png" alt="Choose Plan">
                </div>
                <div class="step-label">
                    STEP 3<br>
                    Choose your plan
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-container">
        <div class="content-card">
            <h1 class="content-title">Log in with Singpass to help us access your medical and insurance records securely and quickly.</h1>
            
            <div class="singpass-btn">
                <img src="/static/images/loginwithsingpass.png" alt="Log in with Singpass" onclick="handleSingpassLogin()">
            </div>
            
            <a href="#" class="skip-link" onclick="showManualUpload(event)">Upload documents manually? Skip first</a>
            
            <div class="manual-upload" id="manualUpload">
                <div class="upload-area" onclick="document.getElementById('fileInput').click()" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <img src="/static/images/upload_docs_icon.png" class="upload-icon" alt="Upload">
                    <div class="upload-text">Drag and drop your documents here</div>
                    <div class="upload-hint">or click to browse files</div>
                    <input type="file" id="fileInput" class="file-input" multiple accept=".pdf,.jpg,.jpeg,.png" onchange="handleFileSelect(event)">
                </div>
                <button class="continue-btn" onclick="proceedToQuestionnaire()">Continue to Questionnaire</button>
            </div>
            
            <div class="info-box">
                <div class="info-box-title">Why does Clearcover require access to my Singpass?</div>
                <div class="info-box-content">
                    We use Singpass to securely access your medical and insurance records with your consent. This helps us provide you with the most accurate insurance recommendations tailored to your specific needs and health profile. Your data is encrypted and protected at all times.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function handleSingpassLogin() {
            // Simulate Singpass login
            alert('Singpass login integration would be implemented here');
            // After successful login, proceed to questionnaire
            setTimeout(() => {
                window.location.href = '/questionnaire';
            }, 1000);
        }
        
        function showManualUpload(event) {
            event.preventDefault();
            const manualUpload = document.getElementById('manualUpload');
            manualUpload.style.display = 'block';
            event.target.style.display = 'none';
        }
        
        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }
        
        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }
        
        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            const files = event.dataTransfer.files;
            handleFiles(files);
        }
        
        function handleFileSelect(event) {
            const files = event.target.files;
            handleFiles(files);
        }
        
        function handleFiles(files) {
            console.log('Files selected:', files);
            // Store files in localStorage or send to server
            if (files.length > 0) {
                alert(`${files.length} file(s) uploaded successfully`);
            }
        }
        
        function proceedToQuestionnaire() {
            // Store that user chose manual upload
            localStorage.setItem('upload_method', 'manual');
            window.location.href = '/questionnaire';
        }
        
        function handleLogoClick() {
            const userData = localStorage.getItem('user_data');
            if (userData) {
                window.location.href = '/dashboard';
            } else {
                window.location.href = '/';
            }
        }
        
        // Check if user is logged in
        const userData = localStorage.getItem('user_data');
        if (!userData) {
            window.location.href = '/login';
        }
    </script>
</body>
</html>